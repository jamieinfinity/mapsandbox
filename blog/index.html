
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Map Sandbox Project</title>
  <meta name="author" content="Jamie Williams">

  
  <meta name="description" content="In this post I give a brief summary of some core mapping concepts and demonstrate how to draw geographical points
and areas using Mapbox/Leaflet. &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jamieinfinity.github.io/mapsandbox/blog">
  <link href="/mapsandbox/favicon.png" rel="icon">
  <link href="/mapsandbox/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Map Sandbox Project" type="application/atom+xml">
  <script src="/mapsandbox/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/mapsandbox/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$', '$'], ["\\(", "\\)"] ],
        displayMath: [ ['$$', '$$'], ["\\[", "\\]"] ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
      //,
      //displayAlign: "left",
      //displayIndent: "2em"
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

<script src='//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.js'></script>
<link href='//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.css' rel='stylesheet'/>

<script type="text/javascript">
    var BASE_URL = '/mapsandbox';
</script>

<style>
    .mapinfo {
        padding: 6px 8px;
        font: 14px/16px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255, 255, 255, 0.8);
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
        border-radius: 5px;
    }

    .mapinfo h4 {
        margin: 0 0 5px;
        color: #777;
    }

    .mapboxmap {
        border-width:1px;
        border-style:solid;
        border-color:#CCCCCC;
    }
    .mapcaption {
        color: #666666;
        font-size: smaller;
    }


</style>
  


  <link href="/mapsandbox/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/mapsandbox/">Map Sandbox Project</a></h1>
  
    <h2>A sandbox for designing and implementing comparative thematic maps.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jamieinfinity.github.io/mapsandbox" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/mapsandbox/blog/archives">Contents</a></li>
  <li><a href="/mapsandbox/blog/">Latest</a></li>
  <li><a href="https://github.com/jamieinfinity/mapsandbox" target="_blank">Code</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/mapsandbox/blog/2013/12/21/mapping-points-and-polygons/">Mapping Points and Polygons</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-21T00:00:00-06:00" pubdate data-updated="true">Dec 21<span>st</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>In this post I give a brief summary of some core mapping concepts and demonstrate how to draw geographical points
and areas using Mapbox/Leaflet.</em></p>

<h2 id="working-with-geolocation-data">Working with geolocation data</h2>

<p>By now, thanks to the ubiquity of <a href="http://en.wikipedia.org/wiki/Global_Positioning_System">GPS</a> on mobile devices, most people are familiar
with the concept of assigning a coordinate point to a location
on the surface of the Earth. This point is given by a pair of spherical angular coordinates (also referred to as geographic coordinates)
<code>(λ, φ)</code> called longitude and latitude
in a <a href="http://en.wikipedia.org/wiki/Geographic_coordinate_system">geographic coordinate system</a>. Longitude is the east/west angle from the prime meridian,
while latitude is the north/south angle from the equator.</p>

<h3 id="datums">Datums</h3>

<p>Because the Earth is not a perfect sphere, it is necessary when doing geospatial calculations to take into account the deviations of the
Earth’s ellipsoidal surface from a spherical surface. Such a model of the Earth’s surface is referred to
 as a <a href="http://www.maptoaster.com/maptoaster-topo-nz/articles/projection/datum-projection.html">datum</a>. The predominant geographic reference system used for
this is the World Geodetic System, the latest revision of which is <a href="http://en.wikipedia.org/wiki/World_Geodetic_System">WGS 84</a>. Other datums
one might encounter are the <a href="http://en.wikipedia.org/wiki/North_American_Datum">NAD 83</a>
and <a href="http://en.wikipedia.org/wiki/GRS_80">GRS 80</a>. Transforming between these reference models can result in slight
coordinate shifts (from a few centimeters to a meter).</p>

<h3 id="projections">Projections</h3>

<p>In order to visualize a region of the globe on the flat surface of a map, one must project the region from the ellipsoidal surface
of the Earth, where a point is specified in spherical coordinates <code>(φ, λ)</code>, to a planar surface, where a point is specified in
rectangular coordinates <code>(x, y)</code>. Such a <a href="http://en.wikipedia.org/wiki/Map_projection">map projection</a> results in a distortion of one or more of the following properties: distance,
area, shape, or direction. There are dozens of established projection schemes one can choose from, each optimized to solve a
particular type of problem. Two of the most common types of projections are (both conformal, angle preserving): <a href="http://en.wikipedia.org/wiki/Mercator_projection">Mercator</a>
and <a href="http://en.wikipedia.org/wiki/Transverse_Mercator_projection">transverse Mercator</a>.</p>

<h3 id="coordinate-systems">Coordinate systems</h3>

<p>In order to keep track of the various coordinate systems to help simplify transforming between them, a
<a href="http://spatialreference.org/">repository</a> was created, with unique spatial reference identifiers (<a href="http://en.wikipedia.org/wiki/SRID">SRID</a>)
assigned to each one. Each coordinate system must specify the projection and associated datum (e.g. WGS 84) upon which it is based. Here are a few
common coordinate systems:</p>

<ul>
  <li>
    <p><a href="http://spatialreference.org/ref/epsg/4326/">EPSG:4326</a> (uses WGS 84 datum): This is the default geometric (spherical angular) coordinate system for the WGS 84 datum. It is sometimes
referred to as the WGS 84 coordinate system.</p>
  </li>
  <li>
    <p><a href="http://spatialreference.org/ref/sr-org/7483/">EPSG:3857</a> (uses WGS 84 datum): Commonly referred to as the ‘Web Mercator’ system (also known as
EPSG:900913), this coordinate system is based on a Mercator projection, and is used by many mapping applications (e.g. Google maps, Bing, OpenStreetMaps, Mapbox/Leaflet, etc).
This specification has a somewhat curious (and confusing) history outlined well in an <a href="http://alastaira.wordpress.com/2011/01/23/the-google-maps-bing-maps-spherical-mercator-projection/">article by Alastair Aitchison</a>.
In practice, when using an API based on this system, one specifies the coordinates in spherical angular coordinates (ESPG:4326), and the service then carries out
the projection into the EPSG:3857 system for rendering.</p>
  </li>
  <li>
    <p><a href="http://en.wikipedia.org/wiki/State_Plane_Coordinate_System">State Plane Coordinate System (SPCS)</a> (uses NAD 83 datum): This is a <a href="http://www.eye4software.com/resources/stateplane/">collection</a>
of coordinate systems resulting from
a local projection (typically either the transverse Mercator or the Lambert conformal conic projection). The St. Louis Metropolitan Police Department use this system to report
their crime incidents, in particular, they use the <a href="http://spatialreference.org/ref/epsg/26996/">EPSG:26996</a> Missouri-East SPCS. The distances (typically given in units of feet, but sometimes meters) of the coordinates are measured relative
to an origin unique to that projection lying outside of the state.</p>
  </li>
</ul>

<p>Esri has a <a href="http://resources.esri.com/help/9.3/arcgisengine/dotnet/89b720a5-7339-44b0-8b58-0f5bf2843393.htm">concise overview</a> of all of these concepts that I found useful.</p>

<!--
### Typical workflow
-->

<h2 id="geojson-data-format">GeoJSON data format</h2>

<p><a href="http://en.wikipedia.org/wiki/GeoJSON">GeoJSON</a> is a commonly used specification for encoding geospatial data using the <a href="http://en.wikipedia.org/wiki/JSON">JSON</a> data format.
The specification allows for several different types of features, such as a “Point”, a “LineString” and “Polygon”. The GeoJSON spec does not require the points within a polygon to
be ordered (see this <a href="http://lists.geojson.org/pipermail/geojson-geojson.org/2007-October/000273.html">thread</a>), but many applications that import GeoJSON do require polygon points to be ordered (either clockwise or count-clockwise). The spec also allows each feature to be
assigned a set of user-defined properties (such as a description or perhaps a numerical value used to assign a color).</p>

<p>As an example, consider the following GeoJSON data describing a point and a polygon:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
<a href="#n7" name="n7">7</a>
<a href="#n8" name="n8">8</a>
<a href="#n9" name="n9">9</a>
<strong><a href="#n10" name="n10">10</a></strong>
<a href="#n11" name="n11">11</a>
<a href="#n12" name="n12">12</a>
<a href="#n13" name="n13">13</a>
<a href="#n14" name="n14">14</a>
<a href="#n15" name="n15">15</a>
<a href="#n16" name="n16">16</a>
<a href="#n17" name="n17">17</a>
<a href="#n18" name="n18">18</a>
<a href="#n19" name="n19">19</a>
<strong><a href="#n20" name="n20">20</a></strong>
<a href="#n21" name="n21">21</a>
</pre></td>
  <td class="code"><pre>{ <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">FeatureCollection</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">features</span><span class="delimiter">&quot;</span></span>: [
    { <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Feature</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">geometry</span><span class="delimiter">&quot;</span></span>: {<span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">coordinates</span><span class="delimiter">&quot;</span></span>: [<span class="float">-90.193378</span>, <span class="float">38.631263</span>]},
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {<span class="key"><span class="delimiter">&quot;</span><span class="content">myProperty</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">val1</span><span class="delimiter">&quot;</span></span>}
      },
    { <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Feature</span><span class="delimiter">&quot;</span></span>,
       <span class="key"><span class="delimiter">&quot;</span><span class="content">geometry</span><span class="delimiter">&quot;</span></span>: {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Polygon</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">coordinates</span><span class="delimiter">&quot;</span></span>: [
                [ [<span class="float">-90.196158</span>, <span class="float">38.62781</span>], [<span class="float">-90.193031</span>, <span class="float">38.627043</span>],
                [<span class="float">-90.193368</span>, <span class="float">38.626247</span>], [<span class="float">-90.19641</span>, <span class="float">38.626997</span>] ]
           ]
       },
       <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
         <span class="key"><span class="delimiter">&quot;</span><span class="content">myProperty</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">val2</span><span class="delimiter">&quot;</span></span>,
         <span class="key"><span class="delimiter">&quot;</span><span class="content">anotherProperty</span><span class="delimiter">&quot;</span></span>: <span class="integer">42</span>
         }
       }
     ]
   }
</pre></td>
</tr></table>
</div>

<h2 id="interactive-maps-with-mapbox">Interactive maps with Mapbox</h2>

<p>The GeoJSON format can be used to encode data for use in Mapbox. The <a href="https://www.mapbox.com/mapbox.js/api/v1.5.2/">Mapbox API</a> for displaying maps is built on the
<a href="http://leafletjs.com/index.html">Leaflet library</a>. The <a href="https://www.mapbox.com/mapbox.js/example/v1.0.0/">Mapbox examples</a> page shows many different use cases of loading GeoJSON data. Also, checkout
this <a href="http://leafletjs.com/examples/geojson.html">Leaflet example</a>. Below I show an example where I draw a few features on
a map for St. Louis: a polygon showing the outline of City Garden, and the old and new locations of the tech incubator T-REX.</p>

<div class="bogus-wrapper"><notextile><figure>
<div style="height:360px" id="mbmap" class="mapboxmap"></div>
<figcaption class="mapcaption">Example of drawing points and a polygon (<a href="https://github.com/jamieinfinity/mapsandbox/tree/gh-pages/javascripts/posts/mapping-points-and-polygons">JavaScript source code</a>).</figcaption>
</figure></notextile></div>
<script src="../../../../../javascripts/posts/mapping-points-and-polygons/buildMap1.js"></script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/mapsandbox/blog/2013/12/15/base-map/">Base Map</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-15T00:00:00-06:00" pubdate data-updated="true">Dec 15<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>A base map is the canvas on which we will draw our geoanalytic visualizations. This post gives a brief summary of
base map design using Mapbox.</em></p>

<h2 id="mapbox">Mapbox</h2>

<p>In order to build a thematic map to visualize crime statistics and other neighborhood attributes, we’ll need a
base map to provide the background context that shows basic geographical information like streets, buildings, parks, and
waterways. In this project, we’ll tap into the powerful mapping tool <a href="https://www.mapbox.com/">Mapbox</a>. It provides
tools for styling and deploying maps that are based on <a href="http://www.openstreetmap.org/">OpenStreetMap</a> data,
with <a href="https://www.mapbox.com/developers/">API’s</a> allowing maps to be easily embedded in web pages and mobile apps.</p>

<p>The service operates
under a freemium model, so you can sign up for free and get started immediately. <a href="https://www.mapbox.com/plans/">Subscription rates</a>
are primarily based on map views, with the free plan allowing for 3000 views/month. They provide an online map editor
for very basic features (e.g. choosing the colors of streets, land areas, waterways, etc) and a desktop app call
<a href="https://www.mapbox.com/tilemill/">Tilemill</a> for advanced map design. So far the online editor has been sufficient for
my needs, but it’s nice knowing the advanced customization capability is there if I need it.</p>

<h2 id="base-map-design">Base map design</h2>

<p>The base map is meant to provide a geographical context for the thematic data being visualized. The base map styling
should be done using neutral colors and the features should be somewhat subdued because we’ll be adding colored
features to this base layer that encode the statistics we’re interested in and we want those features to stand out.</p>

<div class="bogus-wrapper"><notextile><figure>
<div style="height:360px" id="mbmap" class="mapboxmap"></div>
<figcaption class="mapcaption">A base map I designed using the Mapbox online editor.</figcaption>
</figure></notextile></div>

<h2 id="embedding-a-map">Embedding a map</h2>

<p>Mapbox provides a JavaScript library <a href="https://www.mapbox.com/mapbox.js/">mapbox.js</a> that
is <a href="https://www.mapbox.com/blog/mapbox-js-with-leaflet/">integrated</a> with
the <a href="http://leafletjs.com/">leaflet.js</a> library for building interactive maps. I’m a JavaScript newbie at the moment,
so my coding is largely based on finding pre-existing examples to use as a starting point and then adding
my own tweaks and customizations.</p>

<p>It’s straightforward to embed a map into a web page. First you need to add a reference to the library and the mapbox
CSS in the <code>&lt;head&gt;</code> element:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span><span class="content">//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.js</span><span class="delimiter">'</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;link</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">'</span><span class="content">//api.tiles.mapbox.com/mapbox.js/v1.5.2/mapbox.css</span><span class="delimiter">'</span></span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">'</span><span class="content">stylesheet</span><span class="delimiter">'</span></span><span class="tag">/&gt;</span>
</pre></td>
</tr></table>
</div>

<p>Somewhere in your html source, you also need to provide the actual JavaScript code that embeds the map into the
correct element. The key mapbox function is <code>L.mapbox.map(element_id, map_id, options)</code>, where <code>element_id</code> is the id of the
html element and <code>map_id</code> is the unique identifier of your base map, e.g.:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
<a href="#n2" name="n2">2</a>
<a href="#n3" name="n3">3</a>
<a href="#n4" name="n4">4</a>
<a href="#n5" name="n5">5</a>
<a href="#n6" name="n6">6</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">'</span><span class="content">text/javascript</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>
<span class="inline">    <span class="keyword">var</span> map = L.mapbox.map(<span class="string"><span class="delimiter">'</span><span class="content">mbmap</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">jamieinfinity.g7e1c0h2</span><span class="delimiter">'</span></span>, {
                <span class="key">scrollWheelZoom</span>: <span class="predefined-constant">false</span>
              });
    map.setView(<span class="keyword">new</span> L.LatLng(<span class="float">38.632</span>, -<span class="float">90.24</span>), <span class="integer">13</span>);</span>
<span class="tag">&lt;/script&gt;</span>
</pre></td>
</tr></table>
</div>

<p>Finally, wherever you want the map to appear in your content you’ll need to place the <code>&lt;div id='element_id'&gt;</code> tag. For the
map above, this is:</p>

<div><table class="CodeRay"><tr>
  <td class="line-numbers"><pre><a href="#n1" name="n1">1</a>
</pre></td>
  <td class="code"><pre><span class="tag">&lt;div</span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">'</span><span class="key">height</span>:<span class="float">360px</span><span class="delimiter">'</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">'</span><span class="content">mbmap</span><span class="delimiter">'</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">'</span><span class="content">mapboxmap</span><span class="delimiter">'</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
</pre></td>
</tr></table>
</div>

<script type="text/javascript">
        var map = L.mapbox.map('mbmap', 'jamieinfinity.g7e1c0h2', {
                    scrollWheelZoom: false
                  });
	    map.setView(new L.LatLng(38.632, -90.24), 13);
</script>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/mapsandbox/blog/2013/12/11/resources/">Resources</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-11T00:00:00-06:00" pubdate data-updated="true">Dec 11<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>Over the past few months I’ve been collecting useful resources as I study crime mapping and learn how to build maps.
This post contains an updated list of web links, books, and tools.</em></p>

<h2 id="crime-mapping-references">Crime mapping references</h2>
<p>Crime mapping is an active area of research in the broader field of criminology. There are a couple of really
nice review articles that have become standard references (as far as I can tell, as an outsider). Both of these
were published by the <em>National Institute of Justice</em> (NIJ):</p>

<blockquote>
  <p>K.D. Harries, ‘Mapping crime: principles and practice’, U.S. Dept. of Justice,
National Institute of Justice, Washington D.C. (1999).  <a href="https://www.ncjrs.gov/pdffiles1/nij/178919.pdf">[pdf]</a></p>
</blockquote>

<blockquote>
  <p>J.E. Eck, S. Chainey, J.G. Cameron, M. Leitner, R.E. Wilson, ‘Mapping crime: understanding hot spots’, U.S. Dept. of Justice,
National Institute of Justice, Washington D.C. (2005).  <a href="https://www.ncjrs.gov/pdffiles1/nij/209393.pdf">[pdf]</a></p>
</blockquote>

<p>I also found the following article by J. Ratcliffe useful:</p>

<blockquote>
  <p>J. Ratcliffe, ‘Crime Mapping: Spatial and Temporal Challenges’, in Handbook of Quantitative Criminology (Eds.
A.R. Piquero &amp; D. Weisburd), Springer (2010). <a href="http://www.springer.com/cda/content/document/cda_downloaddocument/9780387776491-c1.pdf?SGWID=0-0-45-855459-p173798539">[pdf]</a></p>
</blockquote>

<p>S. Chainey and J. Ratcliffe have co-authored one of the definitive books on crime mapping:</p>

<blockquote>
  <p>S. Chainey and J. Ratcliffe, ‘GIS and Crime Mapping’, Wiley (2007). <a href="http://www.amazon.com/GIS-Crime-Mapping-Mastering-Applications/dp/0470860987/">[amazon]</a></p>
</blockquote>

<p>The book I’ve found most useful, however, is an ArcGIS tutorial on crime mapping by W.L. Gorr and K.S. Kurland. One of
the challenges with learning the core standard practices of this field as an outsider is finding reference data that
one can use to reproduce the calculations being described. This tutorial is the only source I found that provides
such data (unfortunately, the Esri license agreement prohibits me from redistributing the data).</p>

<blockquote>
  <p>W.L. Gorr and K.S. Kurland, ‘GIS Tutorial for Crime Analysis’, ESRI Press (2011). <a href="http://www.amazon.com/Tutorial-Crime-Analysis-Wilpen-Gorr/dp/158948214X">[amazon]</a></p>
</blockquote>

<p>Finally, another useful reference is a book on infographics by I. Meirelles. It’s an excellent book, and has a great chapter
on map visualizations:</p>

<blockquote>
  <p>I. Meirelles, ‘Design for Information’, Rockport Publishers (2013). <a href="http://www.amazon.com/Design-Information-Introduction-Histories-Visualizations/dp/1592538061">[amazon]</a></p>
</blockquote>

<h2 id="software--tools">Software / tools</h2>

<p>One of the most widely used geographical information systems is <a href="http://www.arcgis.com/features/">ArcGIS</a>. It has
turnkey solutions for all of the common geographical mapping use-cases, but also has the toolset for tackling advanced
problems. I’ve only just begun to use it by walking through the ‘GIS Tutorial for Crime Analysis’ mentioned above, which
provides a six month license key. Esri offers a <a href="http://store.esri.com/esri/showdetl.cfm?SID=2&amp;Product_ID=1315">home use</a>
license for $100. They also have integrated Python scripting to help automate and scale up the overall GIS workflow (see their Python
<a href="http://arcpy.wordpress.com/">blog</a> and GitHub <a href="http://esri.github.io/#Python">repo</a> for more info).</p>

<p>Although I intend to continue to dive deeper into learning how to put ArcGIS to good use, for me at the moment its main role is as
a reference to compare my own calculations and visualizations to. Standard geographical data operations are available in
ArcGIS, but these canned routines are essentially black boxes. I’m interested in understanding (at least partly) the
underlying math and science the geoanalysis routines. As such, I will be ‘reinventing the wheel’ to some degree by
implementing my own solutions to some of these standard problems (like binning and smoothing data points).</p>

<p>Starting out, I will be using the scientific computing platform <a href="http://www.wolfram.com/mathematica/">Mathematica</a>,
which is a much more general-purpose tool than ArcGIS, and does have many built-in GIS features (such as importing
shape files and transforming between geo projections). I was a developer at Wolfram for about six years, and so know my
way around Mathematica pretty well. They also have a <a href="http://www.wolfram.com/mathematica-home-edition/">
home use</a> license, for \$295 (or for an annual subscription of \$149).</p>

<p>ArcGIS and Mathematica provide a spring board to get up and running doing calculations and making visualizations. However, I’m also interested
in developing a suite of tools in Python, which is open source, if for no other reason than that I’ve been wanting to learn Python for a while,
and so a project like this provides a context and motivation to do so. There are several open source GIS tools and
libraries I can tap into. <a href="http://www.qgis.org/en/site/">QGIS</a> is an open source framework that seems to be trying to offer many of the same
features as ArcGIS. Like ArcGIS, it has been integrated with a number of related Python libraries (see the
<a href="http://pyqgis.org/">PyQGIS</a> page and the <a href="http://www.qgis.org/en/docs/pyqgis_developer_cookbook/intro.html">PyQGIS cookbook</a>).
Another useful Python library is <a href="http://www.gdal.org/index.html">GDAL</a>, which seems mainly focussed
on raster data manipulations (as opposed to vector/polygon operations).</p>

<p>For rendering maps, there are some awesome open source tools available. <a href="http://leafletjs.com/"> Leaflet</a>
is a JavaScript library for building
interactive maps on the web. It has been integrated into <a href="https://www.mapbox.com/">Mapbox</a>,
which provides additional features such as building styled base maps that can be hosted on their servers. It integrates
data from <a href="http://www.openstreetmap.org/#map=5/51.500/-0.100">OpenStreetMap</a> integrated into
its services. I will be making heavy use of Mapbox in my subsequent posts.
They even have a mobile app <a href="https://www.mapbox.com/developers/">SDK</a> for iOS and Android, which I may tap into.
You can also combine the power of <a href="http://bost.ocks.org/mike/leaflet/">D3.js</a> with Leaflet, which was done to great effect
in a widget tool called <a href="http://sztanko.github.io/crosslet/">Crosslet</a>.</p>

<p>The domain of GIS and mapping has its own <a href="http://gis.stackexchange.com/">Stack Exchange site</a>, which is a valuable resource for working with any of the
above tools.</p>

<h2 id="crime-data">Crime data</h2>

<h3 id="data-sources">Data sources</h3>

<p>The best unified source of crime incident data that I know of is through the <a href="http://www.socrata.com/">Socrata</a> service.
It is an open data platform that many city governments are using to host their data. It has a feature-rich web interface, where a
user can query the data, generate and save visualizations (including mapping), and export data. Socrata also offers a
<a href="http://dev.socrata.com/">developer API</a>. In the table below, I provide a list of URL’s I curated several months ago
(it may be slightly out of date).</p>

<table>
  <thead>
    <tr>
      <th>City / County</th>
      <th>Socrata Portal</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Austin</td>
      <td><a href="http://data.austintexas.gov/">http://data.austintexas.gov/</a></td>
    </tr>
    <tr>
      <td>Baltimore</td>
      <td><a href="http://data.baltimorecity.gov/">http://data.baltimorecity.gov/</a></td>
    </tr>
    <tr>
      <td>Belleville, IL</td>
      <td><a href="https://data.illinois.gov/belleville">https://data.illinois.gov/belleville</a></td>
    </tr>
    <tr>
      <td>Boston</td>
      <td><a href="https://data.cityofboston.gov/">https://data.cityofboston.gov/</a></td>
    </tr>
    <tr>
      <td>Champaign, IL</td>
      <td><a href="https://data.illinois.gov/champaign">https://data.illinois.gov/champaign</a></td>
    </tr>
    <tr>
      <td>Chicago</td>
      <td><a href="http://data.cityofchicago.org/">http://data.cityofchicago.org/</a></td>
    </tr>
    <tr>
      <td>Honolulu</td>
      <td><a href="https://data.honolulu.gov/">https://data.honolulu.gov/</a></td>
    </tr>
    <tr>
      <td>Kansas City</td>
      <td><a href="https://data.kcmo.org/">https://data.kcmo.org/</a></td>
    </tr>
    <tr>
      <td>Madison</td>
      <td><a href="https://data.cityofmadison.com/">https://data.cityofmadison.com/</a></td>
    </tr>
    <tr>
      <td>New Orleans</td>
      <td><a href="http://data.nola.gov/">http://data.nola.gov/</a></td>
    </tr>
    <tr>
      <td>New York City</td>
      <td><a href="https://data.cityofnewyork.us">https://data.cityofnewyork.us</a></td>
    </tr>
    <tr>
      <td>Oakland</td>
      <td><a href="https://data.oaklandnet.com">https://data.oaklandnet.com</a></td>
    </tr>
    <tr>
      <td>Raleigh</td>
      <td><a href="https://data.raleighnc.gov">https://data.raleighnc.gov</a></td>
    </tr>
    <tr>
      <td>Redmond, WA</td>
      <td><a href="https://data.redmond.gov">https://data.redmond.gov</a></td>
    </tr>
    <tr>
      <td>Rockford, IL</td>
      <td><a href="https://data.illinois.gov/rockford">https://data.illinois.gov/rockford</a></td>
    </tr>
    <tr>
      <td>Salt Lake City</td>
      <td><a href="https://data.slcgov.com">https://data.slcgov.com</a></td>
    </tr>
    <tr>
      <td>San Francisco</td>
      <td><a href="https://data.sfgov.org">https://data.sfgov.org</a></td>
    </tr>
    <tr>
      <td>Seattle</td>
      <td><a href="http://data.seattle.gov/">http://data.seattle.gov/</a></td>
    </tr>
    <tr>
      <td>Somerville, MA</td>
      <td><a href="http://data.somervillema.gov">http://data.somervillema.gov</a></td>
    </tr>
    <tr>
      <td>Wellington, FL</td>
      <td><a href="https://data.wellingtonfl.gov/">https://data.wellingtonfl.gov/</a></td>
    </tr>
    <tr>
      <td>Cook County, IL</td>
      <td><a href="https://datacatalog.cookcountyil.gov">https://datacatalog.cookcountyil.gov</a></td>
    </tr>
  </tbody>
</table>

<p><br />
Having a Socrata data portal, however, doesn’t guarantee the city is making crime incident data available. For example, the city
of Saint Louis does not (to my knowledge) have a Socrata portal, but the St. Louis Metropolitan Police Department does
provide <a href="http://www.slmpd.org/Crimereports.shtml">monthly crime reports</a> containing tabulated incident data. In future posts,
I’ll be focusing on crime data for Chicago, St. Louis, San Francisco, and Seattle:</p>

<table>
  <thead>
    <tr>
      <th>City</th>
      <th>Crime data link</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Chicago</td>
      <td><a href="https://data.cityofchicago.org/Public-Safety/Crimes-2001-to-present/ijzp-q8t2">https://data.cityofchicago.org/Public-Safety/Crimes-2001-to-present/ijzp-q8t2</a></td>
    </tr>
    <tr>
      <td>St. Louis</td>
      <td><a href="http://www.slmpd.org/Crimereports.shtml">http://www.slmpd.org/Crimereports.shtml</a></td>
    </tr>
    <tr>
      <td>San Francisco</td>
      <td><a href="https://data.sfgov.org/Public-Safety/SFPD-Reported-Incidents-2003-to-Present/dyj4-n68b">https://data.sfgov.org/Public-Safety/SFPD-Reported-Incidents-2003-to-Present/dyj4-n68b</a></td>
    </tr>
    <tr>
      <td>Seattle</td>
      <td><a href="https://data.seattle.gov/Public-Safety/Seattle-Police-Department-Police-Report-Incident/7ais-f98f">https://data.seattle.gov/Public-Safety/Seattle-Police-Department-Police-Report-Incident/7ais-f98f</a></td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<h3 id="data-access">Data access</h3>

<p>For a broad overview of current trends in how city governments are making crime data available to the public, check out the following two-part
article the <a href="http://sunlightfoundation.com/">Sunlight Foundation</a> published earlier this fall:</p>

<blockquote>
  <p>A. Green,  ‘The Landscape of Municipal Crime Data’,  The Sunlight Foundation blog, 9/10/13.  <a href="http://sunlightfoundation.com/blog/2013/09/10/the-landscape-of-municipal-crime-data/">[link]</a>;  A. Green, ‘The Impact of Opening Up Crime Data’, The Sunlight Foundation blog, 9/12/13. <a href="http://sunlightfoundation.com/blog/2013/09/12/the-impact-of-opening-up-crime-data/">[link]</a></p>
</blockquote>

<p>In the first article, the author summarizes the broad range of levels of effort and quality of open data practices in U.S. cities, while the
second highlights some of the notable success stories of citizens putting available data to good use. Even more valuable is the
<a href="https://docs.google.com/document/d/1IFHRbKVSlKFpOuTJL1YE2mo5i7qNezlUMi1DHpK27rw/edit?pli=1">raw set of research notes</a> the
author has made available via Google docs, which includes additional links to data sources.</p>

<p>An important issue to be aware of when looking for crime data is the question of data ownership and the potential legal pitfalls stemming from
this. A few years ago there was a federal court case that eventually reached a settlement, where the company Public Engines (who operate
CrimeReports) sued ReportSee (who operate SpotCrime) for programmatically scraping their website. The details of the lawsuit
can be found in this article:</p>

<blockquote>
  <p>M. Masnick, ‘Who Owns Public Crime Data?’, TechDirt blog, 6/14/10. <a href="http://www.techdirt.com/articles/20100614/0208019805.shtml">[link]</a></p>
</blockquote>

<p>and a summary of the settlement and its ramifications are given in these two articles:</p>

<blockquote>
  <p>J. Ellis, ‘How public is public data? With Public Engines v. ReportSee, new access standards could emerge’, Nieman Lab, 2/17/11. <a href="http://www.niemanlab.org/2011/02/how-public-is-public-data-with-public-engines-v-reportsee-new-access-standards-could-emerge/">[link]</a></p>
</blockquote>

<blockquote>
  <p>A. Hochberg, ‘Disputes over crime maps highlight challenge of outsourcing public data’, Poynter news, 5/11/13. <a href="http://www.poynter.org/latest-news/making-sense-of-news/213443/disputes-over-crime-maps-highlight-challenge-of-outsourcing-public-data/">[link]</a></p>
</blockquote>

<p>To briefly summarize: Public Engines had entered into agreements with certain city police departments, acting as a third party taking in data from
the agencies and providing a public interface to the data. ReportSee had scraped data from the CrimeReports web site operated by
Public Engines.</p>

<p>In the settlement, ReportSee is barred from using data from CrimeReports and also <em>can not ask for data from agencies that are contracted
with Public Engines.</em>  That second restriction does not apply to everyone, however, since apparently the contracts do not forbid the participating
police departments from making their data available to others. But in practice many departments are treating their contracts with third party
data providers as exclusive, which likely violates open data laws that many states have legislated. At first glance, the settlement also seems to be
in contradiction with the landmark <a href="http://en.wikipedia.org/wiki/Feist_v._Rural"><em>Feist v. Rural</em></a>
ruling that established that raw facts can not be copyrighted. However, according to the Hochberg article, nowhere in their site
licensing or in the lawsuit does Public Engines make any copyright claims on the data.</p>

<h2 id="administrative-divisions">Administrative divisions</h2>

<p>There are two main types of administrative division needed for this project: city neighborhoods and census blocks. In the table below I provide links
to neighborhood boundaries for several cities:</p>

<table>
  <thead>
    <tr>
      <th>City</th>
      <th>Neighborhood boundaries link</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Chicago</td>
      <td><a href="https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Neighborhoods/9wp7-iasj">https://data.cityofchicago.org/Facilities-Geographic-Boundaries/Boundaries-Neighborhoods/9wp7-iasj</a></td>
    </tr>
    <tr>
      <td>St. Louis</td>
      <td><a href="">XXX</a></td>
    </tr>
    <tr>
      <td>San Francisco</td>
      <td><a href="https://data.sfgov.org/Service-Requests-311-/Neighborhoods/ejmn-jyk6">https://data.sfgov.org/Service-Requests-311-/Neighborhoods/ejmn-jyk6</a></td>
    </tr>
    <tr>
      <td>Seattle</td>
      <td><a href="https://data.seattle.gov/dataset/Neighborhoods/2mbt-aqqx">https://data.seattle.gov/dataset/Neighborhoods/2mbt-aqqx</a></td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>The United States Census Bureau provides socioeconomic statistics for regions at varying levels of granularity: nation, state, county, etc. The smallest level of granularity
is at the so-called <a href="http://blogs.census.gov/2011/07/20/what-are-census-blocks/">census block</a> level. These are of interest for this project because the Census Bureau produces
demographic data assigned to these blocks, such as population, which will allow me to calculate a ‘per capita’ crime rate. Census block boundary files and demographic
data can be downloaded directly from the Census Bureau site. The links are provided below. Note: obtaining demographic data such as population is a multistep process outlined
in this <a href="https://www.census.gov/rdo/pdf/AmericanFactFinderPlace_block_query.pdf">pdf</a>.</p>

<table>
  <thead>
    <tr>
      <th>Resource</th>
      <th>link</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>TIGER/Line® shapefiles</td>
      <td><a href="http://www.census.gov/cgi-bin/geo/shapefiles2013/main">http://www.census.gov/cgi-bin/geo/shapefiles2013/main</a></td>
    </tr>
    <tr>
      <td>Demographic data</td>
      <td><a href="http://factfinder2.census.gov/">http://factfinder2.census.gov/</a></td>
    </tr>
  </tbody>
</table>

<p><br /></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/mapsandbox/blog/2013/12/09/motivation-and-goals/">Motivation and Goals</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-09T00:00:00-06:00" pubdate data-updated="true">Dec 9<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>This project is an attempt to build a tool for visualizing a side-by-side comparison of neighborhood livability metrics.
My initial focus is on crime statistics, but what I’m building should be extensible to other kinds of socioeconomic
attributes. In this post I describe my motivation and goals for the project.</em></p>

<h2 id="backdrop">Backdrop</h2>

<p>I became interested in crime mapping about a year ago when I was relocating to St. Louis for a new job and had done a bit of research
weighing the pros &amp; cons of different neighborhoods. St. Louis has a reputation of having a higher crime rate than most other cities
in the U.S., consistently being toward the top of <a href="http://lawstreetmedia.com/blogs/crime/10-dangerous-large/">nation-wide rankings</a>, and this 
certainly played on my mind at the time. I ended up moving into a downtown loft, which is a fifteen minute walk from where I work. After 
living here for nearly a year, I’ve grown to love this diverse city and all it has to offer: it has a rapidly growing, supportive 
<a href="http://vimeo.com/67970720">entrepreneur community</a>, a vibrant tech community with a wide range of active <a href="http://www.meetup.com/find/?keywords=technology&amp;radius=25&amp;userFreeform=Saint+Louis%2C+MO&amp;mcId=z63103&amp;mcName=Saint+Louis%2C+MO&amp;sort=recommended&amp;eventFilter=mysugg">meetup groups</a>, a great selection of <a href="https://www.pinterest.com/athomeinstl/st-louis-foodie-culture/">restaurants</a> and <a href="http://www.yelp.com/search?find_desc=Microbrewery&amp;find_loc=Saint+Louis%2C+MO">microbreweries</a>, 
the beautiful historic <a href="http://explorestlouis.com/visit-explore/discover/neighborhoods/forest-park/">Forest Park</a> filled with top-notch museums, 
frequent <a href="http://explorestlouis.com/visit-explore/discover/neighborhoods/">neighborhood festivals</a>, a vital <a href="http://explorestlouis.com/visit-explore/discover/st-louis-sports-fans/">sports culture</a>, and on and on….</p>

<p>St. Louis, then, seems to embody a glaring contradiction: How can such a vibrant city rank as one of the most
dangerous cities in the U.S. to live? It challenges the natural tendency of popular media to present an overly simplified cut-and-dry narrative that 
is easy to comprehend. St. Louis residents, both long-time natives and recent transplants, generally feel the predominant national conversation about 
St. Louis is unfairly dominated by crime statistics, overshadowing all of its other redeeming qualities, which can have a tangible impact on the 
local economy by deterring businesses and individuals from moving here.</p>

<p>There is a recent push by community leaders to try to <a href="http://blog.rallystl.org/the-truth-about-crime-in-st-louis/">change the conversation</a> by focussing on a 
critical flaw in how the statistics are reported: the numbers calculated for St. Louis are aggregated only at the core city level and exclude the surrounding suburbs
of the larger metropolitan area, which is in sharp contrast to most other cities where the crime rate is calculated for the entire metropolitan area. 
City and county officials and community activists are exploring the possibility of an eventual <a href="http://www.ksdk.com/story/news/2013/11/19/st-louis-city-county-merger/3637365/">city-county merger</a>, but in the short term, regional police
leaders are considering <a href="http://www.stltoday.com/news/local/crime-and-courts/st-louis-area-police-leaders-support-combining-city-and-county/article_567ef964-7bf9-5c34-829a-1c9e7d1dad28.html">formally combining city and county crime reporting</a> when compiling Missouri’s statistics for the FBI, which issues
the <a href="http://www.fbi.gov/about-us/cjis/ucr/crime-in-the-u.s/2012/preliminary-annual-uniform-crime-report-january-december-2012">annual city crime rankings</a>. 
Such a merger would have lowered the city’s rank in 2012 from 3rd to 8th.</p>

<p>To some, combining city and county statistics may seem like a statistical slight of hand to improve the overall numbers without actually addressing
the underlying problems leading to elevated crime. It’s true that such a measure is aimed at the <em>perception</em> of crime, 
which is only a small part of law enforcement’s overall strategy; they are also <a href="http://host-35.242.54.159.gannett.com/news/crime/article/398680/147/Urban-Crime-Summit-wraps-up-in-St-Louis">actively exploring</a>
and deploying a variety of measures to lower crime, such as <a href="http://www.ksdk.com/story/news/2013/12/02/sam-dotson-tower-grove-south-hotspot-policing/3813661/">hot spot</a> and <a href="http://www.stlouisco.com/LawandPublicSafety/PoliceDepartment/Services/NeighborhoodPolicing">neighborhood</a> policing and grassroots community initiatives such as 
<a href="http://sirvstl.org/about-sirv/">SiRV</a> to help reduce the factors that produce a culture of violence in communities.</p>

<h2 id="a-different-approach">A different approach</h2>

<p>My interest in crime mapping is limited to the scope of addressing how crime statistics are calculated and conveyed: I believe that better tools for 
visualizing and understanding crime rates can be built and made freely available, and that people would benefit from such an effort. </p>

<p>The core problem I’d like to solve is: how can one meaningfully compare crime in one region to crime in some other region? If a national ranking is to be meaningful,
then parameters used for each city, such as the defined boundary, must be programmatically determined in a way that ensures the resulting statistics are properly normalized across all cities. It shouldn’t be possible for an individual city to alter the way they report crime in order to effect the results of the calculation. The effort in St. Louis
to combine city and county reporting is an attempt to correct for this lack of normalization, which is a good thing. But it shouldn’t be necessary if the underlying 
calculation is properly normalized to begin with.</p>

<p>I feel crime rates aggregated over an entire city or metro area are not of much value. It’s much more useful to be able to compare areas on
a human scale of several blocks within one’s neighborhood. Being able to compare neighborhoods between cities side-by-side is useful, because it provides a
relational context to better interpret meaning of the numerical values.</p>

<p>So, one of my central goals is to build a tool that allows the user to choose a neighborhood in one city and compare it to a neighborhood 
in another city, and do this comparison in a statistically meaningful, ‘apples-to-apples’, way so that they could judge for themselves 
the relative safety of a neighborhood. Such a tool could also be extended to other types of data, such as socioeconomic data and livability metrics, to gain a more 
holistic profile of a neighborhood.</p>

<p>This type of tool does not exist freely on the web or in a mobile app. And so as a software engineer and physicist, I feel I am uniquely
qualified to do the end-to-end ground work required to build such a thing. For me, it’s critical to be very transparent about how
the data is being manipulated: ideally this type of tool would allow the user to trace the full computational path if they so desired, to
find out what assumptions/choices lead to the final visualization.</p>

<p>There are several sites that provide crime maps on the web: <a href="https://www.crimereports.com/">CrimeReports</a>,
<a href="https://www.crimemapping.com/">CrimeMapping</a>, <a href="https://www.raidsonline.com/">RAIDS Online</a>, and
<a href="http://spotcrime.com/">SpotCrime</a>. As far as I can tell, the sole visualization mode offered by these sites is to show
the crime incident data as scatter points on a map,
which doesn’t provide much insight. The key service these sites provide, which is by no means trivial, is that they aggregate the crime data from many different
city municipalities into a unified interface. Simply showing the raw incident data has the virtue of not introducing any subjective
biases into the data, which can sometimes happen when building a thematic map (e.g. a heat map, or choropleth map, etc) if one isn’t
careful.</p>

<p>On the other end of the spectrum, there are several feature-rich GIS systems available capable of advanced geographical data analysis, but these
have a fairly steep learning curve that makes them more suitable for experts than for the average web or mobile app user. The leader
in this space (by a long stretch) is the <a href="http://www.arcgis.com/features/">ArcGIS</a> software, but there are
also some open source tools out there as well, such as <a href="http://www.qgis.org/en/site/">QGIS</a>.</p>

<p>I believe it’s possible to find a balance between these two extremes that provides the user more insight than what can be gleaned by
simply showing the raw incident data, but at the same time provides a streamlined elegant interface that doesn’t require
expert-level skill to interpret the information being visualized.</p>

<p>There are a handful of innovative sites that have taken
a step in this direction by offering more informative thematic maps. The real estate site <a href="http://www.trulia.com/crime/">Trulia</a>
provides a density map of crime aggregated over census blocks (as of Dec. ‘13, they don’t have data for St. Louis). The open government
site <a href="http://apps.axisphilly.org/crime-change/">AxisPhilly</a> has created an interactive choropleth map showing how
crime is changing over time in Philadelphia, aggregated by neighborhood, and the independent news site
<a href="http://www.minnpost.com/crime#city/minneapolis/total">MinnPost</a> provides a similar interactive map showing crime
statistics broken down by neighborhood.</p>

<p>In the next section I’ll sketch an outline of what I hope to build.</p>

<h2 id="project-goals">Project goals</h2>

<p>I’m doing this project ‘just for fun’, purely as an evening/weekend side-project. Aside from the reasons I outlined above,
I’m drawn to this project because there is a mix of problems to be solved that engage different parts of my brain: data wrangling/modeling/analytics,
infographics and UI/UX design, and software engineering.</p>

<p>My long term goal for this project is to build an iOS app for side-by-side comparison of the
crime density between two different neighborhoods (either within the same city, or between two different cities). In due course, I will write out a set of
user stories (probably using <a href="https://waffle.io/">waffle.io<a></a>, which is integrated with GitHub issues). However, realistically
I am still a month or two away from embarking on that.</a></p>

<p>In the short term, this project will be a series of exploratory spikes as I make my way through the fundamentals of
geographical analytics and figure out how to best achieve the desired features. I have already begun working my way through various articles and
books – in a later post I’ll summarize these resources.</p>

<p>Here is a rough sketch of features and related issues that I’ll be exploring:</p>

<ul>
  <li>obtaining and working with crime incident data: be able to translate between shape files and geojson files. Also understand the hierarchy of crime categories.</li>
  <li>transform between map projections: do computations in a planar distance-preserving projection, but then project into whatever projection is appropriate
for map visualization (typically spheroidal lat/long coordinates).</li>
  <li>binning of points on a discrete spatial grid: try to minimize subjectivity in the following (i.e. make determinations algorithmically if possible)
    <ul>
      <li>choice of grid geometry: square, hexagonal, Voronois, or irregular polygons like census blocks.</li>
      <li>choice of grid element size (e.g. 100 feet, 300 feet, 1000 feet, etc).</li>
      <li>be able to project between grids (i.e. the Census Bureau has various indicator data assigned to block polygons, like population, so one needs to be able to
translate these values onto other grids).</li>
    </ul>
  </li>
  <li>applying Gaussian smoothing to estimate incident density: what is the best choice of smoothing radius?</li>
  <li>time binning and smoothing: what are good time interval values for binning and for smoothing (moving average)?</li>
  <li>determine day/night for an incident, given time of day and lat/long.</li>
  <li>be able to apply spatial clustering algorithms, such as computing the nearest neighbor index and Getis Ord G*. As part of this, understand the notion of a
random distribution as a null hypothesis.</li>
  <li>also be able to cluster based on crime profile similarity metric</li>
  <li>choice of color scale for visualizing density: probably best choice wi ll be to base on quantiles of density distribution for region(s) of interest</li>
</ul>

<h2 id="blog-goals">Blog goals</h2>

<p>This blog is primarily for my own personal record keeping: it’s a running account as I figure out how to build this tool. At times my notes may
have the feel of a tutorial, but anyone happening across this site should keep in mind that I’m learning this material as I go and do not pretend to be
an expert in crime mapping or geoanalytics. On the other hand, sometimes it’s useful to see how someone else was able to make sense of a subject they are
learning for the first time.</p>

<p>This is also a companion blog accompanying a GitHub repository where I plan to make my code available. Initially I will be tapping into the scientific
computing platform <a href="http://www.wolfram.com/mathematica/">Mathematica</a> (recently rebranded as
<a href="http://www.wolfram.com/wolfram-language/">Wolfram Language</a>), which is my go-to tool for these kinds of projects (I worked at Wolfram
for nearly six years before pivoting my career into mobile app development). Eventually I’ll be transitioning over to coding everything in python, since there are
so many open-source geo-processing tools available. As a side effect, I think it will be useful to have two distinct implementations to help verify and validate as
I go along.</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/mapsandbox/blog/archives">Index</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
    
      <li class="post">
        <a href="/mapsandbox/blog/2013/12/21/mapping-points-and-polygons/">Mapping Points and Polygons</a>
      </li>
    
      <li class="post">
        <a href="/mapsandbox/blog/2013/12/15/base-map/">Base Map</a>
      </li>
    
      <li class="post">
        <a href="/mapsandbox/blog/2013/12/11/resources/">Resources</a>
      </li>
    
      <li class="post">
        <a href="/mapsandbox/blog/2013/12/09/motivation-and-goals/">Motivation and Goals</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Follow</h1>
  <p>blog: <a href="http://apophenalogic.com" target="_blank">apophenalogic.com</a></p>
  <p>twitter: <a href="http://twitter.com/jamieinfinity" target="_blank">jamieinfinity</a></p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Jamie Williams -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
